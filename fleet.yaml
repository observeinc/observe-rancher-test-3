defaultNamespace: observe

helm:
  chart: "agent"                    # chart name
  repo: "https://observeinc.github.io/helm-charts"
  version: "0.51.1"
  # valuesFrom:
  #   - secretKeyRef:
  #       name: agent-credentials
  #       key: OBSERVE_COLLECTION_ENDPOINT
  #     # targetPath: "observe.collectionEndpoint.value"

  # valuesFrom:
  #   - targetPath: "observe.collectionEndpoint.value"
  #     valueFrom:
  #       secretKeyRef:
  #         key: OBSERVE_COLLECTION_ENDPOINT
  #         name: agent-credentials
  #   - targetPath: "observe.token.value"
  #     valueFrom:
  #       secretKeyRef:
  #         name: agent-credentials
  #         key: OBSERVE_TOKEN

  # no releaseName, no valuesFrom, minimal values
  values:
    agent:
      selfMonitor:
        enabled: false
    application:
      prometheusScrape:
        enabled: true
    cluster:
      events:
        enabled: true
      metrics:
        enabled: true
      name: observe-agent-monitored-cluster
    node:
      enabled: true
      containers:
        logs:
          enabled: true
        metrics:
          enabled: true
      forwarder:
        enabled: true
        traces:
          enabled: true
        metrics:
          enabled: true
        logs:
          enabled: true
    observe:
      # We no longer hardcode .collectionEndpoint.value here,
      # because Fleet will fill it from the secret.
      collectionEndpoint:
        value: "${OBSERVE_COLLECTION_ENDPOINT}"
      token:
        create: false
        value: "${OBSERVE_TOKEN}"
      traceToken:
        create: false
        value: "${TRACE_TOKEN}"
